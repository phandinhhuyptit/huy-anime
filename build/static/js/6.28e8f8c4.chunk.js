(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{106:function(e,t,n){"use strict";var c=n(33),i=n(24),r=n(111),a=n(112),o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"clear",value:function(){localStorage.clear()}},{key:"remove",value:function(e,t){var n=localStorage.getItem(e);if(n){var c=JSON.parse(n);localStorage.setItem(e,JSON.stringify(c.filter((function(e){return!l(e,t)}))))}}},{key:"create",value:function(e,t){var n=localStorage.getItem(e);if(!n)return localStorage.setItem(e,JSON.stringify([t]));var c=JSON.parse(n);c.push(t),localStorage.setItem(e,JSON.stringify(c))}},{key:"findOne",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem(e);if(n){var c=JSON.parse(n);return s(t)?c[0]:c.find((function(e){return l(e,t)}))}}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem(e);if(!n)return[];var c=JSON.parse(n);return s(t)?c:c.filter((function(e){return l(e,t)}))}},{key:"update",value:function(e,t,n){this.remove(e,t);var c=this.findOne(e,t),r=Object(i.a)(Object(i.a)({},c),n);return this.create(e,r)}},{key:"has",value:function(e,t){var n=this.findOne(e,t);return!!n&&!s(n)}}]),e}(),s=function(e){return"{}"===JSON.stringify(e)},l=function(e,t){for(var n=0,i=Object.entries(t),r=0,a=i;r<a.length;r++){var o=Object(c.a)(a[r],2),s=o[0],l=o[1];e[s]===l&&n++}return n===i.length};t.a=o},113:function(e,t,n){"use strict";var c=n(24),i=n(31),r=n(9),a=n.n(r),o=(n(1),n(11)),s=n(2),l=function(e){var t=e.className,n=e.iconSize,r=void 0===n?16:n,o=e.iconClassName,l=e.startIcon,u=e.endIcon,d=Object(i.a)(e,["className","iconSize","iconClassName","startIcon","endIcon"]);return Object(s.jsxs)("button",Object(c.a)(Object(c.a)({className:a()("flex items-center px-4 py-2 rounded-md font-medium text-xs md:text-sm lg:text-base hover:bg-opacity-80",t)},d),{},{children:[l&&Object(s.jsx)(l,{size:r,className:a()("mr-2",o)}),e.children,u&&Object(s.jsx)(u,{size:r,className:a()("ml-2",o)})]}))};t.a=function(e){var t=e.onClick,n=e.to,r=Object(i.a)(e,["onClick","to"]);return n?Object(s.jsx)(o.b,{to:n,children:Object(s.jsx)(l,Object(c.a)({},r))}):Object(s.jsx)(l,Object(c.a)(Object(c.a)({},r),{},{onClick:t}))}},114:function(e,t,n){"use strict";var c=n(159),i=n(39);t.a=function(e){return Object(c.a)(["info",e],(function(){return Object(i.a)(e)}))}},115:function(e,t,n){"use strict";var c=n(4);t.a=function(){var e=Object(c.g)();return new URLSearchParams(e.search)}},116:function(e,t,n){"use strict";var c=n(24),i=n(9),r=n.n(i),a=n(1),o=n(105),s=n(139),l=n(2),u=function(e){return Object(l.jsx)(s.a,{defaultOpen:e.defaultOpen,as:"div",className:r()(e.className),children:function(t){var n=t.open;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(s.a.Button,{className:r()("block",e.buttonClassName),children:e.button}),Object(l.jsx)(s.a.Panel,{className:r()(e.panelClassName,!n&&"hidden"),static:!0,children:e.children})]})}})},d=n(41),b=n(38),j=function(e){return Object(l.jsxs)("div",{onClick:e.onClick,className:"border-gray-400 border-b p-4 rounded-md rounded-b-none flex items-center hover:bg-gray-600 cursor-pointer hover:bg-opacity-50",children:[Object(l.jsx)("p",{className:"text-gray-300 text-lg font-bold w-6 md:w-12",children:e.name}),Object(l.jsx)(b.a,{className:"h-20 max-w-36 w-1/2 object-cover mr-2 md:mr-6",src:e.thumbnail_medium}),Object(l.jsxs)("div",{className:"flex-1 space-y-2",children:[Object(l.jsxs)("div",{className:"space-y-1 text-left",children:[Object(l.jsx)("p",{className:"text-white text-lg font-medium line-clamp-1",children:e.full_name}),Object(l.jsxs)("p",{className:"text-gray-500 text-base font-medium",children:["L\u01b0\u1ee3t xem: ",Object(d.b)(e.views)]})]}),e.active&&Object(l.jsx)("div",{className:"rounded-md bg-primary px-2 py-1 w-max",children:"\u0110ang xem"})]})]})},f=function(e){return Object(l.jsxs)("div",{className:"w-full flex items-center justify-between py-2 px-4",children:[Object(l.jsx)("p",{className:"text-white text-xl",children:e.title}),Object(l.jsx)(o.a,{className:"w-6 h-6 text-white"})]})};t.a=function(e){return Object(l.jsx)(u,{className:r()(e.className),buttonClassName:r()("w-full rounded-md",e.buttonClassName),button:Object(l.jsx)(f,{title:e.title}),defaultOpen:e.open,children:e.episodes.map((function(t,n){return Object(a.createElement)(j,Object(c.a)(Object(c.a)({},t),{},{key:t.slug,active:e.activeName===t.name,onClick:function(){var n;return null===e||void 0===e||null===(n=e.episodeOnClick)||void 0===n?void 0:n.call(e,t,t.name-1)}}))}))})}},156:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var c=n(24),i=n(31),r=n(33),a=n(9),o=n.n(a),s=n(1),l=n.n(s),u=n(157),d=n(4),b=n(113),j=n(38),f=n(42),m=function(){var e=Object(s.useState)(window.screen.width),t=Object(r.a)(e,2),n=t[0],c=t[1];function i(){c(window.screen.width)}return Object(s.useEffect)((function(){return window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}}),[]),{isMobile:n<=768,isDesktop:n>768,isOrientationMobile:"undefined"!==typeof window.orientation}},h="LANDSCAPE",v="portrait",p=function(){var e=Object(s.useState)(v),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(s.useEffect)((function(){var e=function(){window.matchMedia("(orientation: portrait)").matches&&c(v),window.matchMedia("(orientation: landscape)").matches&&c(h)};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]),{isLandscape:n===h,isPortrait:n===v}},O=n(115),x=n(106),y=n(114),g=n(102),w=n(104),N=n(50),k=n(116),C=n(41),S=n(2),E=function(e){return Object(S.jsxs)(g.a,{children:[Object(S.jsx)(g.a.Button,{children:Object(S.jsx)(N.b,{size:18})}),Object(S.jsx)(w.a,{as:s.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(S.jsx)(g.a.Items,{className:"no-tap-highlight rounded-md text-white overflow-y-scroll absolute space-y-2 right-0 bottom-full p-6 h-96 w-32rem mt-2 origin-top-right bg-background shadow-lg focus:outline-none",children:Object(S.jsx)("div",{className:"w-full space-y-2",children:Object(C.a)(null===e||void 0===e?void 0:e.episodes,18).map((function(t,n){var c=e.activeIndex,i=t[0],r=t[t.length-1],a=e.episodes[c],o=t.some((function(e){return e.name-1===c}));return Object(S.jsx)(k.a,{buttonClassName:"episode-buttons bg-background-darker",title:"T\u1eadp ".concat(i.name," - T\u1eadp ").concat(r.name),episodes:t,activeName:a.name,episodeOnClick:e.onClick,open:!!o},n)}))})})})]})},T=n(159),_=n(39),L=function(e,t,n){return Object(T.a)(["source",{animeId:e,episodeIndex:t}],(function(){return Object(_.d)(e,t)}),{enabled:n})},I=n(140),z=n.n(I),M=n(141),P=n.n(M),F=(n(155),n(43)),J=n.n(F),q=function(e){var t=e.children,n=e.element;return J.a.createPortal(t,n)},R=n(105),B=function(e){return Object(S.jsx)("svg",{"aria-hidden":"true",focusable:"false",className:"text-gray-300 hover:text-white w-8 h-8 cursor-pointer",onClick:e.onClick,children:Object(S.jsx)("use",{xlinkHref:"/plyr.svg#plyr-rewind"})})},D=function(e){return Object(S.jsx)("svg",{"aria-hidden":"true",focusable:"false",className:"text-gray-300 hover:text-white w-8 h-8 cursor-pointer",onClick:e.onClick,children:Object(S.jsx)("use",{xlinkHref:"/plyr.svg#plyr-fast-forward"})})},A=function(e){return e.playing?Object(S.jsx)(R.e,{className:"cursor-pointer text-gray-300 hover:text-white w-16 h-16",onClick:e.onClick}):Object(S.jsx)(R.d,{className:"text-gray-300 hover:text-white w-16 h-16 cursor-pointer",onClick:e.onClick})},H=function(e){var t=e.player,n=Object(s.useState)(!1),c=Object(r.a)(n,2),i=c[0],a=c[1],l=m().isOrientationMobile;t.on("play",(function(){a(!0)})),t.on("pause",(function(){a(!1)})),Object(s.useEffect)((function(){var e=document.querySelector(".plyr__control--overlaid");e&&l&&(e.style.display="none")}),[l]);var u=t.config.seekTime,d=Object(s.useCallback)((function(){t.rewind(u)}),[t,u]),b=Object(s.useCallback)((function(){t.forward(u)}),[t,u]),j=Object(s.useCallback)((function(){t.playing?t.pause():t.play()}),[t]);return Object(S.jsxs)("div",{className:o()("text-white flex items-center justify-evenly absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-11/12",!l&&"hidden"),children:[Object(S.jsx)(B,{onClick:d}),Object(S.jsx)(A,{playing:i,onClick:j}),Object(S.jsx)(D,{onClick:b})]})},U=function(e){var t=e.player,n=e.onClick,c=Object(s.useState)(!1),i=Object(r.a)(c,2),a=i[0],l=i[1];return Object(s.useEffect)((function(){t.on("timeupdate",(function(){var e=Math.round(t.duration-t.currentTime);l(e<=120)}))}),[]),Object(S.jsx)("div",{className:o()("z-1 absolute right-10 bottom-20 transition duration-300",a?"opacity-100 visible":"opacity-0 invisible"),children:Object(S.jsxs)("button",{className:o()("rounded-md flex items-center bg-white hover:bg-gray-300 px-4 py-2 space-x-2"),onClick:n,children:[Object(S.jsx)(R.d,{size:30}),Object(S.jsx)("p",{children:"T\u1eadp ti\u1ebfp theo"})]})})},X=function(e){var t=e.player,n=e.children,c=e.nextEpisodeClick,i=Object(s.useState)(!0),a=Object(r.a)(i,2),l=a[0],u=a[1],d=m().isOrientationMobile;return t.on("controlsshown",(function(){u(!0)})),t.on("controlshidden",(function(){u(!1)})),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:o()("plyr--overlay transition duration-300 z-1",l?"opacity-100":"opacity-0"),children:[Object(S.jsx)("div",{className:o()("absolute left-0 top-0 h-full w-full bg-black bg-opacity-70 transition duration-300",!d&&"hidden")}),Object(S.jsx)(H,{player:t}),n]}),Object(S.jsx)(U,{player:t,onClick:c})]})},V=(n(156),function(e){var t=e.component,n=e.id,c=e.position,i=e.className,r=document.querySelector(".plyr_buttons--".concat(n));null===r||void 0===r||r.remove();var a=document.querySelector(".plyr__controls"),s=document.createElement("div");s.className=o()("plyr__controls__item plyr__control","plyr_buttons--".concat(n),i);var l=null===a||void 0===a?void 0:a.childNodes;l&&(null===a||void 0===a||a.insertBefore(s,c<0?l[(null===l||void 0===l?void 0:l.length)-1]:l[c-1]),J.a.render(t,s))}),G=!1,K=function(e){var t=e.options,n=void 0===t?null:t,a=e.source,o=e.onReady,l=e.onSourceChange,u=e.children,d=e.nextEpisodeClick,b=Object(i.a)(e,["options","source","onReady","onSourceChange","children","nextEpisodeClick"]),j=null===a||void 0===a?void 0:a.sources[0].src,f=Object(s.useState)(),m=Object(r.a)(f,2),h=m[0],v=m[1],p=Object(s.useState)(),O=Object(r.a)(p,2),x=O[0],y=O[1],g=Object(s.useRef)(),w=Object(s.useRef)(new z.a),N=Object(c.a)(Object(c.a)({},n),{},{quality:{default:720,options:[720]}}),k=function(){var e=new P.a(".plyr-react",N);G=!1,j.includes("m3u8")||(e.source=a),e.on("ready",(function(t){v(e),G||(G=!0,null===o||void 0===o||o(e,t),y(document.querySelector(".plyr--video")))})),e.on("enterfullscreen",(function(){window.screen.orientation.lock("landscape")}))};return w.current.on(z.a.Events.MANIFEST_LOADED,(function(){N.quality={default:w.current.levels[w.current.levels.length-1].height,options:w.current.levels.map((function(e){return e.height})),forced:!0,onChange:function(e){w.current.levels.forEach((function(t,n){t.height===e&&(w.current.currentLevel=n)}))}},k()})),Object(s.useEffect)((function(){var e=document.querySelector("footer");return null===e||void 0===e||e.classList.add("hidden"),function(){null===e||void 0===e||e.classList.remove("hidden")}}),[]),Object(s.useEffect)((function(){null===l||void 0===l||l(h)}),[h,l]),Object(s.useEffect)((function(){if(g.current)return j.includes("m3u8")&&z.a.isSupported()?(w.current.loadSource(j),w.current.attachMedia(g.current),null===h||void 0===h||h.on("play",(function(){return w.current.startLoad()})),null===h||void 0===h||h.on("qualitychange",(function(){var e,t;0!==(null===(e=g.current)||void 0===e||null===(t=e.plyr)||void 0===t?void 0:t.currentTime)&&w.current.startLoad()}))):k(),function(){return null===h||void 0===h?void 0:h.destroy()}}),[j]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("video",Object(c.a)({ref:g,className:"plyr-react plyr"},b)),x&&Object(S.jsx)(q,{element:x,children:Object(S.jsx)(X,{nextEpisodeClick:d,player:h,children:u})})]})};K.displayName="Plyr",K.defaultProps={options:{iconPrefix:"plyr",iconUrl:"/plyr.svg",i18n:{restart:"Xem l\u1ea1i",rewind:"L\xf9i {seektime} gi\xe2y",play:"Xem",pause:"D\u1eebng",fastForward:"Ti\u1ebfn {seektime} gi\xe2y",seek:"Tua",seekLabel:"{currentTime} / {duration}",played:"\u0110\xe3 ch\u1ea1y",buffered:"\u0110\xe3 load",currentTime:"Th\u1eddi gian hi\u1ec7n t\u1ea1i",duration:"Th\u1eddi l\u01b0\u1ee3ng",volume:"\xc2m l\u01b0\u1ee3ng",mute:"T\u1eaft \xe2m l\u01b0\u1ee3ng",unmute:"M\u1edf \xe2m l\u01b0\u1ee3ng",enableCaptions:"M\u1edf ph\u1ee5 \u0111\u1ec1",disableCaptions:"T\u1eaft ph\u1ee5 \u0111\u1ec1",download:"T\u1ea3i xu\u1ed1ng",enterFullscreen:"M\u1edf to\xe0n m\xe0n h\xecnh",exitFullscreen:"Tho\xe1t to\xe0n m\xe0n h\xecnh",frameTitle:"Video {title}",captions:"Ph\u1ee5 \u0111\u1ec1",settings:"C\xe0i \u0111\u1eb7t",menuBack:"Tr\u1edf v\u1ec1 menu",speed:"T\u1ed1c \u0111\u1ed9",normal:"B\xecnh th\u01b0\u1eddng",quality:"Ch\u1ea5t l\u01b0\u1ee3ng video",loop:"L\u1eb7p"},controls:["play-large","play","rewind","fast-forward","progress","current-time","mute","volume","settings","fullscreen"],autoplay:!0}};var Q=l.a.memo(K,(function(e,t){var n,c;return(null===(n=e.source)||void 0===n?void 0:n.sources[0].src)===(null===(c=t.source)||void 0===c?void 0:c.sources[0].src)}));t.default=function(){var e=Object(d.i)().slug,t=Object(O.a)(),n=Object(d.h)(),a=m(),l=a.isDesktop,h=a.isOrientationMobile,v=p().isPortrait,g=Object(s.useState)(!1),w=Object(r.a)(g,2),N=w[0],k=w[1],C=Object(s.useState)(!1),T=Object(r.a)(C,2),_=T[0],I=T[1],z=Object(s.useState)(Number(t.get("episode_index"))||0),M=Object(r.a)(z,2),P=M[0],F=M[1],J=Object(s.useRef)(null),q=Object(y.a)(e),R=q.data,B=q.isLoading,D=L(null===R||void 0===R?void 0:R.id,P,!!R),A=D.data,H=D.isLoading,U=function(t,c){n("/watch/".concat(e,"?episode_index=").concat(c),{replace:!0}),F(c)};return Object(s.useEffect)((function(){I(!!v)}),[v]),B||H?Object(S.jsx)("div",{className:"absolute flex items-center justify-center bg-background inset-0 w-screen h-screen z-50",children:Object(S.jsx)(f.a,{})}):Object(S.jsx)("div",{className:"fixed scrollbar-hide bg-background inset-0 w-screen h-screen z-50",children:Object(S.jsxs)("div",{className:"relative w-full h-full",children:[Object(S.jsx)(Q,{source:{type:"video",sources:[{src:null===A||void 0===A?void 0:A.videoSource}]},onReady:function(e){l&&document.addEventListener("visibilitychange",(function(){if(J.current&&clearTimeout(J.current),"visible"!==document.visibilityState){J.current=setTimeout((function(){return k(!0)}),6e3)}}))},onSourceChange:function(){var e=R,t=e.episodes,n=(e.thumbnail,Object(i.a)(e,["episodes","thumbnail"]));x.a.update("recent",{id:null===R||void 0===R?void 0:R.id},Object(c.a)(Object(c.a)({},n),{},{thumbnail:null===A||void 0===A?void 0:A.thumbnail_medium,episodeIndex:P,time:t[P].full_name})),[{component:Object(S.jsx)(E,{episodes:null===R||void 0===R?void 0:R.episodes,onClick:U,activeIndex:P}),id:"episodes-button",position:6,className:"flex items-center justify-center"}].forEach((function(e){V(e)}))},nextEpisodeClick:function(){F((function(e){return e+1}))},children:Object(S.jsx)("div",{className:"absolute top-8 left-8",children:Object(S.jsx)(u.a,{size:30,className:"text-gray-300 hover:text-white cursor-pointer",onClick:function(){return n(-1)}})})}),Object(S.jsxs)("div",{className:o()("absolute inset-0 bg-black bg-opacity-90 flex flex-col items-center justify-center",_?"block":"hidden"),children:[Object(S.jsx)(j.a,{src:"/rotate_landscape.gif",alt:"Please rotate your device to landscape"}),Object(S.jsx)("h1",{className:"text-center text-white text-xs sm:text-sm font-medium",children:"Chuy\u1ec3n sang ch\u1ebf \u0111\u1ed9 ngang \u0111\u1ec3 c\xf3 tr\u1ea3i nghi\u1ec7m t\u1ed1t nh\u1ea5t."}),Object(S.jsx)(b.a,{className:"text-white my-4 bg-primary",onClick:function(){return I(!1)},children:"\u0110\xf3ng"})]}),Object(S.jsxs)("div",{className:o()("absolute inset-0 bg-black bg-opacity-90 px-40 flex flex-col space-y-6 justify-center",!N||h?"hidden":"block"),onMouseEnter:function(){l&&N&&k(!1)},children:[Object(S.jsxs)("div",{className:"space-y-2",children:[Object(S.jsx)("h1",{className:"text-gray-400 font-medium text-lg",children:"B\u1ea1n \u0111ang xem"}),Object(S.jsx)("h1",{className:"text-white font-bold text-5xl",children:null===R||void 0===R?void 0:R.name}),Object(S.jsx)("h1",{className:"text-white font-bold text-2xl",children:null===A||void 0===A?void 0:A.full_name})]}),Object(S.jsx)("h1",{className:"text-gray-500 text-base font-medium line-clamp-3",children:null===R||void 0===R?void 0:R.description})]})]})})}}}]);
//# sourceMappingURL=6.28e8f8c4.chunk.js.map